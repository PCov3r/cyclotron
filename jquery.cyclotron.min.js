!function(o){o.fn.cyclotron=function(t){return this.each(function(){var n,e,i,a,u=o(this),c=0,r=0,s=[],h=0,f=0,d=o.extend({dampingFactor:.93,historySize:5,autorotation:0,continuous:1},t)
if((d.dampingFactor>1||d.dampingFactor<0)&&("object"==typeof console&&console.log("dampingFactor out of range "+d.dampingFactor),d.dampingFactor=.93),1===d.continuous&&u.hasClass("nonContinuous")&&(d.continuous=0),0===d.continuous){var g=new Image,m=u.css("background-image").replace(/url\((['"])?(.*?)\1\)/gi,"$2"),l=u.css("background-size").split(" "),p=[u.width(),u.height()],w=[],v=1
o(g).one("load",function(){if(v=g.width>g.height?g.width/g.height:g.height/g.width,w[0]=l[0],w[1]=l.length>1?l[1]:"auto","auto"===w[0]&&"auto"===w[1])w[0]=g.width
else{if("cover"===l[0])if(p[0]>p[1]){if(p[0]/p[1]>=v)return p[0]
w[0]="auto",w[1]=p[1]}else w[0]="auto",w[1]=p[1]
else if("contain"===l[0])p[0]<p[1]?w[0]=p[0]:p[0]/p[1]>=v?(w[0]="auto",w[1]=p[1]):(w[1]="auto",w[0]=p[0])
else for(var o=l.length;o--;)l[o].indexOf("px")>-1?w[o]=l[o].replace("px",""):l[o].indexOf("%")>-1&&(w[o]=p[o]*(l[o].replace("%","")/100))
v="auto"===w[0]?g.height/w[1]:g.width/w[0],w[0]="auto"===w[0]?g.width/v:w[0]}h=w[0]-u.width()}),g.src=m}0!=d.autorotation&&(e=!1,c=d.autorotation),u.on("touchstart mousedown",function(o){var t=o.pageX>0?o.pageX:o.originalEvent.touches[0].pageX
n=t-r,e=!0,o.preventDefault()}),u.on("touchmove mousemove",function(o){if(e){var t=o.pageX>0?o.pageX:o.originalEvent.touches[0].pageX
void 0===a&&(a=t),r=t-n,s.length>d.historySize&&s.shift(),s.push(a-t),checkOffset(),u.css("background-position",r),a=t}}),u.on("mouseleave mouseup touchend",function(){if(e){for(var o=s.length,t=s[o-1],n=0;o>n;n++)t=(t*o+s[n])/(o+1)
c=t}e=!1}),i=function(){e||0===c||(c*=d.dampingFactor,r-=c,checkOffset(),u.css("background-position",r),Math.abs(c)<.001&&(c=0))},window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(o){window.setTimeout(o,100/6)}}(),function F(){requestAnimFrame(F),i()}(),checkOffset=function(){0===d.continuous&&(f>-r&&(c=1===d.autorotation?-c:0,r=-f),-r>h&&(c=1===d.autorotation?-c:0,r=-h))}})}}(jQuery),jQuery(document).ready(function(){jQuery(".cyclotron").cyclotron()})
