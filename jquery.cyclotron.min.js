!function(o){o.fn.cyclotron=function(t){return this.each(function(){function n(){0===f.continuous&&(m>-d&&(s=1===f.autorotation?-s:0,d=-m),-d>g&&(s=1===f.autorotation?-s:0,d=-g))}function i(o){var t,n=new Image,i=o.css("background-image").replace(/url\((['"])?(.*?)\1\)/gi,"$2"),e=o.css("background-size").split(" "),a=[o.width(),o.height()],u=[]
if(n.src=i,t=n.width>n.height?n.width/n.height:n.height/n.width,u[0]=e[0],u[1]=e.length>1?e[1]:"auto","auto"===u[0]&&"auto"===u[1])return n.width
if("cover"===e[0])if(a[0]>a[1]){if(a[0]/a[1]>=t)return a[0]
u[0]="auto",u[1]=a[1]}else u[0]="auto",u[1]=a[1]
else if("contain"===e[0]){if(a[0]<a[1])return a[0]
a[0]/a[1]>=t?(u[0]="auto",u[1]=a[1]):(u[1]="auto",u[0]=a[0])}else for(var r=e.length;r--;)e[r].indexOf("px")>-1?u[r]=e[r].replace("px",""):e[r].indexOf("%")>-1&&(u[r]=a[r]*(e[r].replace("%","")/100))
return t="auto"===u[0]?n.height/u[1]:n.width/u[0],"auto"===u[0]?n.width/t:u[0]}var e,a,u,r,c,s=0,d=0,h=[],g=0,m=0
e=o(this)
var f=o.extend({dampingFactor:.93,historySize:5,autorotation:0,continuous:1},t);(f.dampingFactor>1||f.dampingFactor<0)&&("object"==typeof console&&console.log("dampingFactor out of range "+f.dampingFactor),f.dampingFactor=.93),1===f.continuous&&e.hasClass("nonContinuous")&&(f.continuous=0),0===f.continuous&&(g=i(e)-e.width()),0!=f.autorotation&&(u=!1,s=f.autorotation),e.bind("touchstart mousedown",function(o){var t=o.pageX>0?o.pageX:o.originalEvent.touches[0].pageX
a=t-d,u=!0,o.preventDefault()}),e.bind("touchmove mousemove",function(o){if(u){var t=o.pageX>0?o.pageX:o.originalEvent.touches[0].pageX
void 0===c&&(c=t),d=t-a,h.length>f.historySize&&h.shift(),h.push(c-t),n(),e.css("background-position",d),c=t}}),e.bind("mouseleave mouseup touchend",function(){if(u){for(var o=h.length,t=h[o-1],n=0;o>n;n++)t=(t*o+h[n])/(o+1)
s=t}u=!1}),r=function(){u||0===s||(s*=f.dampingFactor,d-=s,n(),e.css("background-position",d),Math.abs(s)<.001&&(s=0))},window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(o){window.setTimeout(o,100/6)}}(),function p(){requestAnimFrame(p),r()}()})}}(jQuery),jQuery(document).ready(function(){$(".cyclotron").cyclotron()})
